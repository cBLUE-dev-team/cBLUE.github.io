Workflow Overview
=================

The recommended workflow consists of 5 steps:

1. Open GUI
2. Specify directories
3. Specify parameters
4. Load trajectory file(s)
5. Process TPU

Many of the processes within the TPU tool have status messages that are visible in either the DOS window or the IDE output window, depending on how the GUI was run. Although not always useful in production mode, these status messages may be useful when monitoring long processes or troubleshooting unintended behavior.

1. Open Gui
###########
The GUI can be initiated from the command line with the following command (specify the full path of Gui.py if the current directory is not the location of Gui.py):

NOTE: If there are multiple Python installations on the computer running the GUI, ensure the desired installation is specified in the path environment variables or explicitly specify the full path of the relevant python executable in the command. For example:

	(command line)> C:\\Python27\\64-bit\\python.exe Gui.py

The GUI can also be initiated by running the Gui.py file from a Python IDE, such as IDLE or PyCharm.

2. Specify Directories
######################
The data directories can be specified in any order. Once a directory is specified, any corresponding process button will become enabled. For example, once the SBET Directory is specified, the Load SBET Files button will become enabled.

3. Specify Parameters
#####################

Subaqueous Parameters
***********************
The user is required to characterize two environmental conditions - the water surface and turdity.

Water Surface
-------------
The user has two options to characterize the water-surface. Both options use pre-computed coefficient lookup tables generated using Monte Carlo simulations.

* *Riegl VQ-880-G*
	This proof-of-concept option is currently limited in applicability. The lookup table used in this approach is generated from a water surface defined by a sampling of the first returns in a small area of the Marcos Island project. Future development plans include deriving representative surface models for each flight line within each input tile.

* *Model (ECKV spectrum)*
	The lookup table used in this option is generated using a version of the Elfouhaily et al. (ECKV) directional gravity-capillary wave spectrum model that characterizes the distribution of wave frequencies using estimates of wind speed.
	
Turbidity
---------
The user is required to select a turbidity category. The table below shows the kd490 values corresponding to each turbidity category.

.. csv-table:: Turdibity (Kd_490) Classes
	:header: class, value range
	:widths: 10, 10
	
	Clear, 0.06-0.10  
	Clear-Moderate, 0.11-0.17  
	Moderate, 0.18-0.25  
	Moderate-High, 0.26-0.32  
	High, 0.33-0.36 

VDatum Parameters
*****************

VDatum Zone
-----------

The user may specify a VDatum region to include that region's maximum cumulative uncertainty (MCU) in the TPU calculation. The MCU values, obtained from https://vdatum.noaa.gov/docs/est_uncertainties.html, are stored in the file .\\lookup_tables\\V_Datum_MCU_Values.txt.

4. Load Trajectory File(s)
##########################
The Load SBET Files button, which calls load_sbet.py, loads the trajectory data from the ASCII SBET files in the specified SBET directory.

5. Process TPU
##############
The Process TPU button, which calls calc_aerial_TPU.py, becomes enabled once the original tiles have been pre-processed and the SBET data have been loaded.